灵宝cqrs思路

客户端发送命令
命令总线网关将命令转换为命令消息发送到命令总线
命令总线接收到命令路由到响应的命令处理器
命令处理器接收到命令消息，首先进行事件回溯 得到聚合， 每个聚合拥有一个命令队列 处理器根据名利通知处理命令
处理完命令后生成事件 并将事件存储到 事件仓库。


command 发送  使用AggregateInspector  获取到 aggregate 的handler
使用该handler 处理 command
但在 handler使用中 需要从eventStore得到原有的 aggregate
则需要repository 去加载
 
加载执行中  需要一个事件缓存  用于缓存 命令处理中 产生的事件

问题

	1, 如何获取 聚合 aggregate
	2, 如何保证 聚合执行命令
	3, 如何保证 聚合事件
	4, 如何处理在聚合生成过程中产生的事件
	5, 如何保证命令的顺序执行
	6, 如何保证事件是顺序命令执行产生的
	
	
聚合 通过事件回溯产生， 如果没有事件  则为新生的聚合

则聚合根 还有以下属性

	1, 聚合标识符
	2, 聚合实体
	3, 聚合实体类型
	4, 聚合根所拥有的事件缓存
	5, 当前聚合所在的版本
	6, 聚合根能处理的命令
	7, 聚合能够处理的命令产生的事件
	
	
	
	
	