聚合拥有的特性:

1, 应对某个单一功能的行为方法(处理接收到的外部命令, 对应命令产生响应事件)
2, 命令聚合对应性  一个命令只能对应一个聚合
3, 聚合唯一性(每个聚合都是唯一存在的， 没有两个一模一样的聚合存在)

设计思路

每个聚合都是充血模型，含有该聚合类所有的行为方法  
该聚合内部属性 不能由外部直接改变， 只能通过聚合内对外公开的行为方法对外部发出的指令而改变
每个接收外部命令的行为方法 都不能直接改变属性 需要通过发出处理命令后的事件来做响应改变

聚合通过命令来创建
聚合通过事件改变属性
聚合处理命令产生事件

如何保证聚合唯一性?
答: 通过给每个聚合赋予一个唯一标识符 identifier

如何保证聚合的某些属性唯一性
答: 通过对聚合内产生的事件的某些属性进行唯一性检测  事件在发送到外部环境前 必须先进性持久化 然后读取持久化的事件对外发送

如何进行事件回溯产生聚合?
答: 存储聚合所有的事件 并给事件编序号   获取聚合所有的事件处理方法  迭代事件 进行方法响应处理 获取最新的聚合


设计详细:

1, 聚合拥有哪些功能属性
	1, 唯一识别码 identifier
	2, 聚合版本号(即最新的事件编号)
	3, 其他对应功能属性
	4, 处理命令的行为方法(不能直接改变聚合属性，必须通过命令改变)
	5, 对应命令产生的事件的处理方法(改变聚合属性)
	
2, 如何实现上述功能属性

	1, 5个注解实现
		AggregateIdentifier : 保证聚合唯一性
		AggregateUniqueKey	: 保证聚合产生的事件携带这个唯一属性检测
		Version				: 聚合版本
		CommandHandler		: 处理外部指令, 产生事件
		EventHandler 		: 处理内部事件

